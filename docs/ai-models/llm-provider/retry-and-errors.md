# Ретраи, таймауты и ошибки

## Таймауты

- Infer: 30–60s по умолчанию
- Grade: 120s по умолчанию (из-за подготовки контекста)

## Ретраи (экспоненциальная задержка)

- При 429/5xx — до 3 попыток, backoff 0.5s * 2^n, джиттер
- Не ретраить на 4xx (кроме 409/429)

## Таксономия ошибок

- PROVIDER_UNAVAILABLE — сеть/дата‑центр
- RATE_LIMIT — превышение квоты
- TIMEOUT — превышение таймаута
- PARSE_ERROR — невалидный формат ответа
- SCHEMA_VIOLATION — валидатор отклонил ответ
- INPUT_TOO_LARGE — вход превышает лимиты
- UNAUTHORIZED — неверные ключи/токены

## Логирование и аудит

- Записывать trace_id, провайдера, модель, usage, latency_ms
- Не логировать секреты; хранить hash промпта, а не сам текст (опционально)
